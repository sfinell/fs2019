(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(14),c=t.n(r),u=(t(21),t(2)),l=t(4),i=t(3),m=t.n(i),d=function(){return m.a.get("/persons").then(function(e){return e.data})},s=function(e){return m.a.post("/persons",e).then(function(e){return e.data})},f=function(e,n){return m.a.put("".concat("/persons","/").concat(e),n).then(function(e){return e.data})},b=function(e){return m.a.delete("".concat("/persons","/").concat(e)).then(function(e){return e.data})},g=function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.value,onChange:e.onChange}))},h=function(e){return o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.name,onChange:e.onNameChange})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.number,onChange:e.onNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},v=function(e){return o.a.createElement("div",null,e.name," ",e.number," ",o.a.createElement("button",{type:"button",id:e.id,name:e.name,onClick:e.onDelete},"delete"))},p=function(e){return o.a.createElement("div",null,e.persons.map(function(n){return o.a.createElement(v,{key:n.name,id:n.id,name:n.name,number:n.number,onDelete:e.onDelete})}))},E=function(e){var n=e.errorMsg,t=e.infoMsg,a={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},r=Object(l.a)({},a,{color:"green"});return null!==n?o.a.createElement("div",{style:a},n):null!==t?o.a.createElement("div",{style:r},t):null},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),m=i[0],v=i[1],w=Object(a.useState)(""),j=Object(u.a)(w,2),O=j[0],y=j[1],S=Object(a.useState)(""),k=Object(u.a)(S,2),C=k[0],D=k[1],N=Object(a.useState)(null),M=Object(u.a)(N,2),P=M[0],B=M[1],x=Object(a.useState)(null),A=Object(u.a)(x,2),J=A[0],R=A[1];Object(a.useEffect)(function(){console.log("effect"),d().then(function(e){console.log("allPersons:",e),r(e)})},[]),console.log("render",t.length,"persons");var T=function(e){R(e),setTimeout(function(){R(null)},3e3)},W=function(e){B(e),setTimeout(function(){B(null)},2e3)},z=new RegExp(C,"i");return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(E,{errorMsg:J,infoMsg:P}),o.a.createElement(g,{value:C,onChange:function(e){D(e.target.value)}}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(h,{onSubmit:function(e){e.preventDefault(),console.log("button clicked",e.target);var n=t.find(function(e){return e.name===m});n?function(e){if(console.log("updateName, id:",e.id),window.confirm("".concat(m," is already added to phonebook, replace?"))){var n=Object(l.a)({},e,{number:O});f(e.id,n).then(function(n){r(t.map(function(t){return t.id!==e.id?t:n})),v(""),y(""),W("Updated ".concat(n.name))}).catch(function(n){console.log("error:",n),r(t.filter(function(n){return n.id!==e.id})),v(""),y(""),T("Person '".concat(e.name,"' was already removed from server"))})}}(n):s({name:m,number:O}).then(function(e){r(t.concat(e)),v(""),y(""),W("Added ".concat(e.name))})},name:m,onNameChange:function(e){v(e.target.value)},number:O,onNumberChange:function(e){y(e.target.value)}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(p,{persons:t.filter(function(e){return z.test(e.name)}),onDelete:function(e){e.preventDefault();var n=Number(e.target.id),a=e.target.name;console.log("delete id, name:",n,a),window.confirm("Delete ".concat(a," ?"))&&b(n).then(function(e){r(t.filter(function(e){return e.id!==n})),W("Deleted ".concat(a))}).catch(function(e){console.log("error:",e),r(t.filter(function(e){return e.id!==n})),v(""),y(""),T("Person '".concat(a,"' was already removed from server"))})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.707f1ae8.chunk.js.map